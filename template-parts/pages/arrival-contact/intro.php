<?php
/**
 * Intro Section in the Arrival & Contact Page Template.
 *
 * @package grand-hotel-europe
 * @subpackage Module
 * @since 1.0.0
 */

$intro_title = get_field('intro_title');
$intro_text  = get_field('intro_text');
$location = get_field('intro_location');
$intro_group = get_field('intro');
$location = is_array($intro_group) ? ($intro_group['location'] ?? null) : null;
$phone = get_field('intro_phone');
$address = get_field('intro_address');
$email = get_field('intro_email');
?>

<section id="section-intro" class="section-intro xl:pt-0 pb-20 md:pb-24 xl:pb-36">
  <!-- MAP (replaces intro image) -->
  <?php if ( $location ) : ?>
    <div class="theme-container pt-10 md:pt-12">
      <div class="theme-grid">
        <div class="col-start-1 col-span-2 md:col-span-6 xl:col-span-12">
          <?php if ( is_array($location) && !empty($location['lat']) && !empty($location['lng']) ) : ?>
            <div class="acf-map" data-zoom="17" data-zoom-mobile="16">
              <div class="marker"
                data-lat="<?php echo esc_attr($location['lat']); ?>"
                data-lng="<?php echo esc_attr($location['lng']); ?>">
              </div>
            </div>
            <?php endif; ?>
          </div>
        </div>
      </div>
    </div>
  <?php endif; ?>

  <div class="theme-container pt-11 md:pt-16">
    <div class="theme-grid">
      <div class="col-span-2 md:col-span-3 xl:col-span-6">
        <?php if ( $intro_title ) : ?>
          <h2 class="title-secondary text-darker mb-5 md:mb-0"><?php echo $intro_title; ?></h2>
        <?php endif; ?>
      </div>
      
      <div class="col-span-2 md:col-span-3 xl:col-span-6 pb-36">
        <?php if ( $intro_text ) : ?>
          <p class="text-darker"><?php echo $intro_text; ?></p>
        <?php endif; ?>
      </div>

      <div class="xl:col-start-1 xl:col-span-4">
          <?php if ( $phone ) : ?>
            <div class="flex items-start">
              <div class="flex items-center justify-center !w-20 !h-20 bg-cream">
              <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 30 30" fill="none">
                <g clip-path="url(#clip0_2105_8498)">
                  <path d="M23.7111 18.583C23.0969 17.9435 22.3561 17.6016 21.571 17.6016C20.7922 17.6016 20.045 17.9372 19.4055 18.5767L17.4047 20.5712C17.2401 20.4826 17.0754 20.4002 16.9172 20.3179C16.6892 20.204 16.4739 20.0963 16.2903 19.9823C14.4161 18.792 12.7129 17.2407 11.0793 15.2336C10.2879 14.2332 9.756 13.391 9.36976 12.5363C9.88896 12.0614 10.3702 11.5675 10.8387 11.0926C11.016 10.9153 11.1933 10.7317 11.3706 10.5544C12.7002 9.22478 12.7002 7.50256 11.3706 6.1729L9.64203 4.44434C9.44574 4.24806 9.24313 4.04545 9.05318 3.84283C8.67327 3.45027 8.27438 3.04504 7.86282 2.66514C7.24864 2.05729 6.51416 1.73438 5.7417 1.73438C4.96923 1.73438 4.22209 2.05729 3.58892 2.66514C3.58258 2.67147 3.58258 2.67147 3.57625 2.6778L1.42347 4.84957C0.613013 5.66003 0.150799 6.64778 0.0494915 7.79382C-0.102469 9.64268 0.442057 11.3649 0.85995 12.4919C1.88569 15.2589 3.41796 17.8232 5.70371 20.5712C8.47699 23.8827 11.8138 26.4977 15.6255 28.3402C17.0818 29.0304 19.0256 29.8471 21.1974 29.9864C21.3304 29.9928 21.4697 29.9991 21.5963 29.9991C23.0589 29.9991 24.2873 29.4736 25.2497 28.4288C25.256 28.4162 25.2687 28.4098 25.275 28.3972C25.6043 27.9983 25.9842 27.6374 26.3831 27.2511C26.6553 26.9915 26.9339 26.7193 27.2062 26.4344C27.833 25.7822 28.1623 25.0224 28.1623 24.2436C28.1623 23.4585 27.8267 22.705 27.1872 22.0718L23.7111 18.583ZM25.9778 25.2503C25.9715 25.2503 25.9715 25.2567 25.9778 25.2503C25.7309 25.5163 25.4776 25.7569 25.2054 26.0228C24.7938 26.4154 24.3759 26.8269 23.9833 27.2891C23.3438 27.973 22.5904 28.2959 21.6026 28.2959C21.5076 28.2959 21.4063 28.2959 21.3114 28.2895C19.4308 28.1692 17.6833 27.4348 16.3726 26.8079C12.7889 25.073 9.64203 22.61 7.02703 19.4885C4.86792 16.8861 3.42429 14.4801 2.4682 11.8968C1.87935 10.3202 1.66408 9.09182 1.75905 7.93311C1.82237 7.19231 2.1073 6.57813 2.63283 6.0526L4.79194 3.89349C5.10219 3.60223 5.43144 3.44394 5.75436 3.44394C6.15326 3.44394 6.47617 3.68454 6.67879 3.88715C6.68512 3.89349 6.69145 3.89982 6.69778 3.90615C7.08402 4.26706 7.45126 4.64063 7.83749 5.03953C8.03377 5.24214 8.23639 5.44475 8.439 5.6537L10.1676 7.38226C10.8387 8.05342 10.8387 8.67392 10.1676 9.34509C9.98394 9.5287 9.80665 9.71232 9.62303 9.88961C9.09117 10.4341 8.58463 10.9407 8.03377 11.4345C8.02111 11.4472 8.00845 11.4535 8.00211 11.4662C7.45759 12.0107 7.5589 12.5426 7.67287 12.9035C7.6792 12.9225 7.68553 12.9415 7.69186 12.9605C8.14141 14.0495 8.77458 15.0753 9.737 16.2973L9.74333 16.3036C11.4909 18.4564 13.3334 20.1343 15.3659 21.4196C15.6255 21.5843 15.8914 21.7172 16.1447 21.8439C16.3726 21.9578 16.5879 22.0655 16.7715 22.1795C16.7969 22.1921 16.8222 22.2111 16.8475 22.2238C17.0628 22.3314 17.2654 22.3821 17.4743 22.3821C17.9999 22.3821 18.3291 22.0528 18.4368 21.9452L20.6022 19.7797C20.8175 19.5645 21.1594 19.3049 21.5583 19.3049C21.9509 19.3049 22.2738 19.5518 22.4701 19.7671C22.4764 19.7734 22.4764 19.7734 22.4827 19.7797L25.9715 23.2685C26.6237 23.9143 26.6237 24.5792 25.9778 25.2503Z" fill="#333333"/>
                  <path d="M16.2114 7.13708C17.8703 7.41568 19.3773 8.20081 20.5803 9.40383C21.7833 10.6069 22.5621 12.1138 22.847 13.7727C22.9167 14.1906 23.2776 14.4819 23.6892 14.4819C23.7398 14.4819 23.7841 14.4755 23.8348 14.4692C24.3033 14.3932 24.6136 13.95 24.5376 13.4815C24.1957 11.4743 23.2459 9.64444 21.796 8.19448C20.346 6.74452 18.5161 5.79476 16.509 5.45285C16.0405 5.37687 15.6036 5.68712 15.5213 6.14934C15.4389 6.61155 15.7429 7.0611 16.2114 7.13708Z" fill="#333333"/>
                  <path d="M29.9635 13.2336C29.3999 9.92848 27.8423 6.92092 25.4489 4.52754C23.0556 2.13415 20.048 0.576553 16.7429 0.0130316C16.2806 -0.0692806 15.8437 0.247305 15.7614 0.709519C15.6855 1.17807 15.9957 1.61495 16.4643 1.69727C19.4148 2.19747 22.1058 3.59678 24.2459 5.73056C26.386 7.87068 27.779 10.5617 28.2792 13.5122C28.3489 13.9301 28.7098 14.2214 29.1213 14.2214C29.172 14.2214 29.2163 14.215 29.267 14.2087C29.7292 14.1391 30.0458 13.6958 29.9635 13.2336Z" fill="#333333"/>
                </g>
                <defs>
                  <clipPath id="clip0_2105_8498">
                    <rect width="30" height="30" fill="white"/>
                  </clipPath>
                </defs>
              </svg>
              </div>
              <!-- Text -->
              <p class="text-darker"><?php echo $phone; ?></p>
            </div>
          <?php endif; ?>
      </div>

    <div class="xl:col-start-5 xl:col-span-4">
      <?php if ( $email ) : ?>
        <div class="flex items-start gap-[29px]">
          <p class="text-darker"><?php echo $email; ?></p>
        </div>
      <?php endif; ?>
    </div>

    <div class="xl:col-start-10 xl:col-span-8">
      <?php if ( $address ) : ?>
        <div class="flex items-start gap-[29px]">

          <p class="text-darker"><?php echo $address; ?></p>
        </div>
      <?php endif; ?>
    </div>
    </div>
  </div>
</section>